

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Meta-documentation &mdash; python 81a documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
        <script type="text/javascript" src="_static/language_data.js"></script>
        <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="prev" title="Evaluation" href="evaluation.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> python
          

          
          </a>

          
            
            
              <div class="version">
                81
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Documentation</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="installation.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="input.html">Inputs</a></li>
<li class="toctree-l1"><a class="reference internal" href="output.html">Outputs</a></li>
<li class="toctree-l1"><a class="reference internal" href="dummy.html">Dummy Equations</a></li>
<li class="toctree-l1"><a class="reference internal" href="evaluation.html">Evaluation</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Meta-documentation</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">python</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content style-external-links">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>Meta-documentation</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/meta.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="meta-documentation">
<h1>Meta-documentation<a class="headerlink" href="#meta-documentation" title="Permalink to this headline">¶</a></h1>
<div class="section" id="how-to-use-the-auto-documentation-tools">
<h2>How to use the auto-documentation tools<a class="headerlink" href="#how-to-use-the-auto-documentation-tools" title="Permalink to this headline">¶</a></h2>
<p><em>python</em> has two documentation tools, stored in the <em>py_progs</em> directory, and a common file
format for documenting the python functions.</p>
</div>
<div class="section" id="yaml-documentation">
<h2>YAML documentation<a class="headerlink" href="#yaml-documentation" title="Permalink to this headline">¶</a></h2>
<p>The documentation for <em>python</em> variables takes the form of <em>YAML</em> input files stored in
<em>docs/parameters</em>. These are functionally more or less just <em>Python</em> dictionaries, and have a very
flexible structure. A full example outline is:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">example.parameter</span>
<span class="nt">description</span><span class="p">:</span> <span class="p p-Indicator">|</span>
  <span class="no">Multi-line description, which will be copied verbatim.</span>
  <span class="no">Can split across any number of lines.</span>

  <span class="no">And will preserve linebreaks in the middle.</span>
<span class="nt">type</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">Double</span>
<span class="nt">unit</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">cm</span>
<span class="nt">value</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">Greater than 0</span>
<span class="nt">parent</span><span class="p">:</span>
  <span class="nt">parameter.name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">A description, e.g. greater than zero or 0, 1, 2</span>
<span class="nt">file</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">file_it_is_found_in.c</span>
</pre></div>
</div>
<p>The <strong>required</strong> keys that must be present in any file are <code class="docutils literal notranslate"><span class="pre">name</span></code>, <code class="docutils literal notranslate"><span class="pre">description</span></code>, <code class="docutils literal notranslate"><span class="pre">type</span></code>
and <code class="docutils literal notranslate"><span class="pre">file</span></code>.</p>
<p>For enumerators, a more complex setup can be used for the <code class="docutils literal notranslate"><span class="pre">values</span></code> key outlining all the
possible choices:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">example.enumerator</span>
<span class="nt">description</span><span class="p">:</span> <span class="p p-Indicator">|</span>
  <span class="no">Enumerator description</span>
<span class="nt">type</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">Enumerator</span>
<span class="nt">values</span><span class="p">:</span>
  <span class="nt">one</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">Inline text</span>
  <span class="nt">two</span><span class="p">:</span> <span class="p p-Indicator">|</span>
    <span class="no">Multi-line text</span>
  <span class="nt">three</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">Inline text again</span>
<span class="nt">parent</span><span class="p">:</span>
  <span class="nt">example.parameter</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">Required for values of &gt;2.</span>
<span class="nt">file</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">file_it_is_found_in.c</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">parent</span></code> key is used to link between parameters, so you can see which options depend on others
(for example, <a class="reference internal" href="input/parameters/reverb/Reverb.autogen.html#reverb-matom-lines"><span class="std std-ref">Reverb.matom_lines</span></a> depends on <a class="reference internal" href="input/parameters/rt_ion/Line_transfer.autogen.html#id1"><span class="std std-ref">Line_transfer</span></a> being a macro-atom mode).
Parent should be a list of parameters, followed by one (or a list of) values of the parent that result
in this parameter being used, for example:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">parent</span><span class="p">:</span>
  <span class="nt">Line_transfer</span><span class="p">:</span> <span class="p p-Indicator">[</span><span class="nv">macro_atoms</span><span class="p p-Indicator">,</span> <span class="nv">macro_atoms_thermal_trapping</span><span class="p p-Indicator">]</span>
</pre></div>
</div>
<p>Parent will automatically link to the page for each parent. Parent is also used when figuring out the structure
within each file, so put any local parents at the top of the list.
If you’d like to reference one parameter elsewhere within another, you can use the following format</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">:ref:`example.enumerator`</span>
</pre></div>
</div>
<p>TODO: Make structure of parent explicit.</p>
</div>
<div class="section" id="autogenerate-parameter-docs-py">
<h2>autogenerate_parameter_docs.py<a class="headerlink" href="#autogenerate-parameter-docs-py" title="Permalink to this headline">¶</a></h2>
<p>This tool takes the <em>python</em> .c input files, and scans them for calls to input parameters from file.
It is run from the command line as:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">autogenerate_parameter_docs</span><span class="o">.</span><span class="n">py</span>
</pre></div>
</div>
<p>This mode will tell you which parameters are <strong>new</strong>, and undocumented, and which files are
<strong>deprecated</strong> and refer to parameters that no longer exist. In many cases, deprecated parameters
will simply be renamed. You can use this as a reminder to rename the parameter and tweak the <em>YAML</em>
documentation file.</p>
<p>Once this has been done, it can be run using:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">autogenerate_parameter_docs</span><span class="o">.</span><span class="n">py</span> <span class="o">-</span><span class="n">w</span>
</pre></div>
</div>
<p>This will move any deprecated documentation to <em>docs/parameters/old</em>, and generate new <em>YAML</em>
documentation files for the new parameters in <em>docs/parameters</em>. You can now proceed to fill
in the documentation skeletons produced by the utility.</p>
</div>
<hr class="docutils" />
<div class="section" id="autogenerate-rtd-pages-py">
<h2>autogenerate_rtd_pages.py<a class="headerlink" href="#autogenerate-rtd-pages-py" title="Permalink to this headline">¶</a></h2>
<p>This tool takes the <a class="reference internal" href="#yaml-documentation">YAML documentation</a> input files, and converts them into <em>RST</em> files and from there a <em>HTML</em>
documentation page using <em>Sphinx</em>. You don’t need to know anything about the formats in order to use
it- you simply need <em>Sphinx</em> installed, and it is available as a MacPorts package or through apt
on ‘nix systems.</p>
<p>It will read the files in the <em>docs/parameters</em> directory and build a <em>HTML</em> page,
then automatically open it in your browser. You may see some errors during the creation:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">while</span> <span class="n">scanning</span> <span class="n">a</span> <span class="n">block</span> <span class="n">scalar</span>
 <span class="ow">in</span> <span class="s2">&quot;/Users/amsys/python/docs/parameters/sv.diskmin.yaml&quot;</span><span class="p">,</span> <span class="n">line</span> <span class="mi">5</span><span class="p">,</span> <span class="n">column</span> <span class="mi">7</span>
<span class="n">expected</span> <span class="n">chomping</span> <span class="ow">or</span> <span class="n">indentation</span> <span class="n">indicators</span><span class="p">,</span> <span class="n">but</span> <span class="n">found</span> <span class="s1">&#39;c&#39;</span>
 <span class="ow">in</span> <span class="s2">&quot;/Users/amsys/python/docs/parameters/sv.diskmin.yaml&quot;</span><span class="p">,</span> <span class="n">line</span> <span class="mi">5</span><span class="p">,</span> <span class="n">column</span> <span class="mi">8</span>
</pre></div>
</div>
<p>This occurs during the <em>YAML</em> step when a file has an invalid entry, and that parameter file will be
skipped as a consequence. Typically it is cause when a text line is malformed. For inline text
(e.g. <code class="docutils literal notranslate"><span class="pre">values:</span> <span class="pre">condition</span></code>) it occurs when the string starts with a non-alphanumeric character like
<code class="docutils literal notranslate"><span class="pre">&gt;</span></code> (so <code class="docutils literal notranslate"><span class="pre">`values:</span> <span class="pre">&gt;0</span></code> is invalid).</p>
<p>You may also see it when using block text (e.g. <code class="docutils literal notranslate"><span class="pre">description:|</span></code>) if the following lines are not
correctly indented e.g.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">description</span><span class="p">:</span><span class="o">|</span>
<span class="n">The</span> <span class="n">text</span> <span class="k">for</span> <span class="n">values</span> <span class="n">has</span> <span class="ow">not</span> <span class="n">been</span> <span class="n">indented</span> <span class="n">correctly</span>
<span class="ow">and</span> <span class="n">so</span> <span class="n">will</span> <span class="n">throw</span> <span class="n">an</span> <span class="n">error</span><span class="o">.</span>

<span class="n">description</span><span class="p">:</span><span class="o">|</span>
  <span class="n">This</span> <span class="n">text</span> <span class="n">has</span> <span class="n">been</span> <span class="n">indented</span>
  <span class="ow">and</span> <span class="n">so</span> <span class="n">will</span> <span class="ow">not</span> <span class="n">throw</span> <span class="n">an</span> <span class="n">error</span>
</pre></div>
</div>
<p>A common warning is:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">WARNING</span><span class="p">:</span> <span class="n">Unknown</span> <span class="n">target</span> <span class="n">name</span><span class="p">:</span>
</pre></div>
</div>
<p>This occurs during the <em>Sphinx</em> step when it cannot link to the parent for a variable. If a
parameter has a parent provided as a <code class="docutils literal notranslate"><span class="pre">key:value</span></code> pair e.g. <code class="docutils literal notranslate"><span class="pre">reverb.type:</span> <span class="pre">Anything</span> <span class="pre">above</span> <span class="pre">3</span></code>.</p>
<p><em>Sphinx</em> will automatically try to link to <code class="docutils literal notranslate"><span class="pre">reverb.type</span></code> as its parent. If the name is misspelled
(e.g. <code class="docutils literal notranslate"><span class="pre">rverb.type</span></code>) or the parameter simply doesn’t exist any more, it will throw a warning and
generate a dead link.</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
      
        <a href="evaluation.html" class="btn btn-neutral float-left" title="Evaluation" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018, Knox Long, Christian Knigge, Stuart Sims, Nick Higginbottom, James Matthews, Sam Mangham, Edward Parkinson, Mandy Hewitt

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>