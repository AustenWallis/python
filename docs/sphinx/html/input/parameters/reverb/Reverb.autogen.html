

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Reverb &mdash; python 81a documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../../../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../../" src="../../../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../../../_static/jquery.js"></script>
        <script type="text/javascript" src="../../../_static/underscore.js"></script>
        <script type="text/javascript" src="../../../_static/doctools.js"></script>
        <script type="text/javascript" src="../../../_static/language_data.js"></script>
        <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="../../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="Other" href="../other.html" />
    <link rel="prev" title="Reverberation Mapping" href="../reverb.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../../index.html" class="icon icon-home"> python
          

          
          </a>

          
            
            
              <div class="version">
                81
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Documentation</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../installation.html">Getting Started</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../../input.html">Inputs</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../overview.html">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../system_description.html">System Description</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../wind_models.html">Wind Models</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../importing_models.html">Importing Models</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../../parameters.html">Parameters</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../System_type.autogen.html">System_type</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Input_spectra.autogen.html">Input_spectra</a></li>
<li class="toctree-l3"><a class="reference internal" href="../central_object.html">Central object</a></li>
<li class="toctree-l3"><a class="reference internal" href="../disk.html">Disk</a></li>
<li class="toctree-l3"><a class="reference internal" href="../wind.html">Wind</a></li>
<li class="toctree-l3"><a class="reference internal" href="../rt_ion.html">Radiative Transfer &amp; Ionisation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../spectra.html">Spectra</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="../reverb.html">Reverberation Mapping</a><ul class="current">
<li class="toctree-l4 current"><a class="current reference internal" href="#">Reverb</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../other.html">Other</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../output.html">Outputs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../dummy.html">Dummy Equations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../evaluation.html">Evaluation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../meta.html">Meta-documentation</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">python</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content style-external-links">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../../../input.html">Inputs</a> &raquo;</li>
        
          <li><a href="../../parameters.html">Parameters</a> &raquo;</li>
        
          <li><a href="../reverb.html">Reverberation Mapping</a> &raquo;</li>
        
      <li>Reverb</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../../_sources/input/parameters/reverb/Reverb.autogen.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="reverb">
<h1>Reverb<a class="headerlink" href="#reverb" title="Permalink to this headline">¶</a></h1>
<div class="section" id="reverb-type">
<h2>Reverb.type<a class="headerlink" href="#reverb-type" title="Permalink to this headline">¶</a></h2>
<p>Whether to perform reverberation mapping. Reverberation mapping tracks the
path of photons emitted in the simulation as they travel through the geometry,
assuming that any delays from recombination etc. are negligible and all delays
are due to light travel time. For each final spectrum, all contributing
photons are output to a ‘.delay_dump’ file that can then be processed using
our ‘tfpy’ Python (no relation) library.</p>
<p><strong>Type:</strong> Enumerator</p>
<p><strong>Values:</strong></p>
<dl>
<dt>none</dt><dd><p><strong>Off</strong></p>
</dd>
<dt>photon</dt><dd><p>Each photon is assigned an initial path based on its distance from the
central source (assuming emission in the disk and wind is correlated with
emission from the CO).</p>
</dd>
<dt>wind</dt><dd><p>CO photons are assigned paths as in Photon mode, disk photons are assigned
paths as set by the reverb.disk_type parameter. Photons generated in the
wind are assigned a path based on the <em>distribution</em> of paths of photons
that have contributed to continuum absorption in that cell.</p>
</dd>
<dt>matom</dt><dd><p>This works as wind mode, but for a number of specified macro-atom lines
paths are tracked for those photons who cause a deexcitation into a given
line. When a photon is emitted in one of those lines, the path is drawn from
that specific distribution. This distribution is build up not just from the
last cycle of the simulation, but from all cycles after the wind achieves
&gt;90% convergence. This is necessary as some lines are poorly-sampled.</p>
<p>This mode gives pretty much identical results to wind mode, but at least we
made it to check rather than just assuming it would be fine.</p>
<p>This requires that <a class="reference internal" href="../rt_ion/Line_transfer.autogen.html#id1"><span class="std std-ref">Line_transfer</span></a> is either <code class="docutils literal notranslate"><span class="pre">macro_atoms</span></code> or
<code class="docutils literal notranslate"><span class="pre">macro_atoms_thermal_trapping</span></code></p>
</dd>
</dl>
<p><strong>File:</strong> setup_reverb.c</p>
<div class="section" id="reverb-matom-lines">
<h3>Reverb.matom_lines<a class="headerlink" href="#reverb-matom-lines" title="Permalink to this headline">¶</a></h3>
<p>Number of macro-atom lines to track paths for individually. This many
reverb.matom_line entries are required, and the line associated with each has
the path of photons deexciting into it recorded in its own array. Note: This
doesn’t give rise to any noticable differences to the pure wind mode in most
simulations.</p>
<p><strong>Type:</strong> Integer</p>
<p><strong>Values:</strong> Greater than or equal to 0</p>
<p><strong>Parent(s):</strong></p>
<ul class="simple">
<li><p><a class="reference internal" href="#reverb-type"><span class="std std-ref">Reverb.type</span></a>: matom</p></li>
<li><p><a class="reference internal" href="../rt_ion/Line_transfer.autogen.html#id1"><span class="std std-ref">Line_transfer</span></a>: <code class="docutils literal notranslate"><span class="pre">macro_atoms</span></code>, <code class="docutils literal notranslate"><span class="pre">macro_atoms_thermal_trapping</span></code></p></li>
</ul>
<p><strong>File:</strong> setup_reverb.c</p>
<div class="section" id="reverb-matom-line">
<h4>Reverb.matom_line<a class="headerlink" href="#reverb-matom-line" title="Permalink to this headline">¶</a></h4>
<p>Specifies a line associated with a given macro-atom transition. The species
and transition involved are specified. The internal line associated with this
transition will be printed to standard-out for use when processing outputs. A
line is specified as Element:Ion:Upper level:Lower level.</p>
<p><strong>Type:</strong> Int:Int:Int:Int</p>
<p><strong>Values:</strong> &gt;0:&gt;0:&gt;1:&gt;0</p>
<p><strong>Parent(s):</strong></p>
<ul class="simple">
<li><p><a class="reference internal" href="#reverb-matom-lines"><span class="std std-ref">Reverb.matom_lines</span></a>: Greater than 0, once per matom line.</p></li>
</ul>
<p><strong>File:</strong> setup_reverb.c</p>
</div>
</div>
<div class="section" id="reverb-filter-lines">
<h3>Reverb.filter_lines<a class="headerlink" href="#reverb-filter-lines" title="Permalink to this headline">¶</a></h3>
<p>Whether or not to filter any lines out of the output file. This is used to keep output
file sizes down, and avoid them overwhelming the user.</p>
<p><strong>Type:</strong> Int</p>
<p><strong>Values:</strong></p>
<dl>
<dt>0</dt><dd><p><em>No filtering</em></p>
<p>Include <em>all</em> photons that contribute to the spectra in the output
file. Not recommended as it leads to gargantuan file sizes.</p>
</dd>
</dl>
<dl class="option-list">
<dt><kbd><span class="option">-1</span></kbd></dt>
<dd><p><em>Filter continuum</em></p>
<p>Include all photons whose last interaction was scatter
or emission in a line. Recommended setting for exploratory runs where you’d
like to identify which lines are the easiest to process.</p>
</dd>
</dl>
<dl>
<dt>N</dt><dd><p><em>Filter lines</em></p>
<p>Include N <a class="reference internal" href="#reverb-filter-line"><span class="std std-ref">Reverb.filter_line</span></a> entries, each specifying one
line to keep in the output file. If <a class="reference internal" href="#reverb-matom-lines"><span class="std std-ref">Reverb.matom_lines</span></a> is &gt;0, all macro-atom
lines of interest are automatically included in the filter list.</p>
</dd>
</dl>
<p><strong>Parent(s):</strong></p>
<ul class="simple">
<li><p><a class="reference internal" href="#reverb-type"><span class="std std-ref">Reverb.type</span></a>: <code class="docutils literal notranslate"><span class="pre">wind</span></code>, <code class="docutils literal notranslate"><span class="pre">matom</span></code></p></li>
</ul>
<p><strong>File:</strong> setup_reverb.c</p>
<div class="section" id="reverb-filter-line">
<h4>Reverb.filter_line<a class="headerlink" href="#reverb-filter-line" title="Permalink to this headline">¶</a></h4>
<p>Line number of one line to include in the output <code class="docutils literal notranslate"><span class="pre">.delay_dump</span></code> file. This is
the python internal line number. It can be found using either the macro-atom
mode (which prints out the line number once it’s found one) or by doing an
exploratory run with <a class="reference internal" href="#reverb-filter-lines"><span class="std std-ref">Reverb.filter_lines</span></a> = -1, then looking through the delay
dump file for photons of the right wavelength to see what their line is. This
should almost certainly be changed to be specified using a species and
wavelength!</p>
<p><strong>Type:</strong> Integer</p>
<p><strong>Values:</strong> Any valid line index</p>
<p><strong>Parent(s):</strong></p>
<ul class="simple">
<li><p><a class="reference internal" href="#reverb-filter-lines"><span class="std std-ref">Reverb.filter_lines</span></a>: Greater than 0, once per filer line.</p></li>
</ul>
<p><strong>File:</strong> setup_reverb.c</p>
</div>
</div>
<div class="section" id="reverb-path-bins">
<h3>Reverb.path_bins<a class="headerlink" href="#reverb-path-bins" title="Permalink to this headline">¶</a></h3>
<p>Number of bins for photon paths. Reverb modes that record the distribution of
path lengths in every wind cell bin them in this number of bins. Bins are
logarithmically spaced between the minimum scale in the system (the smallest
‘minimum radius’ in any domain) and the 10 * the maximum scale in the system
(10 * the ‘maximum radius’ in any domain). Default value is 1000, going much
higher does not lead to qualitative differences in TF, going lower makes the
bin boundaries show up in the TF.</p>
<p><strong>Type:</strong> Integer</p>
<p><strong>Values:</strong> Greater than 0</p>
<p><strong>Parent(s):</strong></p>
<ul class="simple">
<li><p><a class="reference internal" href="#reverb-type"><span class="std std-ref">Reverb.type</span></a>: <code class="docutils literal notranslate"><span class="pre">wind</span></code>, <code class="docutils literal notranslate"><span class="pre">matom</span></code></p></li>
</ul>
<p><strong>File:</strong> setup_reverb.c</p>
</div>
<div class="section" id="reverb-visualisation">
<h3>Reverb.visualisation<a class="headerlink" href="#reverb-visualisation" title="Permalink to this headline">¶</a></h3>
<p>Which type of visualisation to output, if any. Reverb modes that keep arrays
of photon paths per cell can output them either as averages in a 3d model, or
as a selection of flat text files with full bin-by-bin breakdowns. Useful for
diagnostics.</p>
<p><strong>Type:</strong> Enumerator</p>
<p><strong>Values:</strong></p>
<dl class="simple">
<dt>none</dt><dd><p>No visualisation.</p>
</dd>
<dt>vtk</dt><dd><p>Mesh visualisation. Outputs mean incident path per cell, photon count per cell, and mean
observed delay to ‘.vtk’ format, readable using a range of programs including
(my preferred option) VisIt, available at <a class="reference external" href="https://visit.llnl.gov/">https://visit.llnl.gov/</a>.</p>
</dd>
<dt>dump</dt><dd><p>Outputs distributions of paths for continuum heating and each line to a range of ‘dump cells’
specified by X &amp; Z position.</p>
</dd>
<dt>both</dt><dd><p>Outputs both vtk and dump.</p>
</dd>
</dl>
<p><strong>Parent(s):</strong></p>
<ul class="simple">
<li><p><a class="reference internal" href="#reverb-type"><span class="std std-ref">Reverb.type</span></a>: <code class="docutils literal notranslate"><span class="pre">wind</span></code>, <code class="docutils literal notranslate"><span class="pre">matom</span></code></p></li>
</ul>
<p><strong>File:</strong> setup_reverb.c</p>
<div class="section" id="reverb-dump-cells">
<h4>Reverb.dump_cells<a class="headerlink" href="#reverb-dump-cells" title="Permalink to this headline">¶</a></h4>
<p>Number of cells to dump. When dumping the path distribution info for a range
of cells, this specifies the number of lines of <a class="reference internal" href="#reverb-dump-cell"><span class="std std-ref">Reverb.dump_cell</span></a> that will be
provided.</p>
<p><strong>Type:</strong> Integer</p>
<p><strong>Values:</strong> Greater than or equal to 0</p>
<p><strong>Parent(s):</strong></p>
<ul class="simple">
<li><p><a class="reference internal" href="#reverb-visualisation"><span class="std std-ref">Reverb.visualisation</span></a>: <code class="docutils literal notranslate"><span class="pre">wind</span></code>, <code class="docutils literal notranslate"><span class="pre">matom</span></code></p></li>
</ul>
<p><strong>File:</strong> setup_reverb.c</p>
<div class="section" id="reverb-dump-cell">
<h5>Reverb.dump_cell<a class="headerlink" href="#reverb-dump-cell" title="Permalink to this headline">¶</a></h5>
<p>Position for a cell, listed as a pair of R:Z coordinates. Will accept any
position that falls within a grid, will error out on ones that don’t. This can
be slightly awkward and you may want to run a quick test then use py_wind to
idenfity where wind locations are.</p>
<p><strong>Type:</strong> Float:Float</p>
<p><strong>Unit:</strong> cm:cm</p>
<p><strong>Values:</strong> &gt;0:&gt;0</p>
<p><strong>Parent(s):</strong></p>
<ul class="simple">
<li><p><a class="reference internal" href="#reverb-dump-cells"><span class="std std-ref">Reverb.dump_cells</span></a>: Greater than 0</p></li>
</ul>
<p><strong>File:</strong> setup_reverb.c</p>
</div>
</div>
<div class="section" id="reverb-angle-bins">
<h4>Reverb.angle_bins<a class="headerlink" href="#reverb-angle-bins" title="Permalink to this headline">¶</a></h4>
<p>Used when generating 3d .vtk output files for visualisation. Sets the number
of angle bins used in the output. Aesthetic only; bigger makes prettier meshes
with larger filesizes.</p>
<p><strong>Type:</strong> Integer</p>
<p><strong>Values:</strong> Greater than 0</p>
<p><strong>Parent(s):</strong></p>
<ul class="simple">
<li><p><a class="reference internal" href="#reverb-visualisation"><span class="std std-ref">Reverb.visualisation</span></a>: <code class="docutils literal notranslate"><span class="pre">vtk</span></code>, <code class="docutils literal notranslate"><span class="pre">both</span></code></p></li>
</ul>
<p><strong>File:</strong> setup_reverb.c</p>
</div>
</div>
<div class="section" id="reverb-disk-type">
<h3>Reverb.disk_type<a class="headerlink" href="#reverb-disk-type" title="Permalink to this headline">¶</a></h3>
<p>Setting for how photons generated in the disk are treated when generating path
distributions for wind cells.</p>
<p><strong>Type:</strong> Enumerator</p>
<p><strong>Values:</strong></p>
<dl>
<dt>correlated</dt><dd><p>This mode assumes that disk emission is correlated with the
central source. Photons generated in the disk start with a delay equal to
the direct distance to the central source. This assumes that the ionisation
state and luminosity of the disk surface layer is mostly determined by
unscattered photons from the central source.</p>
</dd>
<dt>uncorrelated</dt><dd><p>This mode generates photons with a delay of 0 wherever in the
disk they come from. This mode is of slightly questionable use and should be
ignored in preference to 0 or 2. It will, in practise, generally work out
similar to type 0 as most of the UV photons are generated close-in to the CO.</p>
</dd>
<dt>ignore</dt><dd><p>This mode assumes that disk photons do <em>not</em> correlate
with the central source (i.e. disk surface  ionisation state and emissivity is
driven not by irradiation from the CO but by the mass inflow). This means that
whilst they contribute to heating the wind, they do not strongly contribute to
the lags for a given line. Photons generated by the disk do not contribute to
the path distributions in the wind in this mode.</p>
<p>By removing the (generally) short-delay disk photons from the wind path
distributions, this will slightly bias them towards the longer delays
associated with wind self-heating/excitation.</p>
</dd>
</dl>
<p><strong>Parent(s):</strong></p>
<ul class="simple">
<li><p><a class="reference internal" href="#reverb-type"><span class="std std-ref">Reverb.type</span></a>: <code class="docutils literal notranslate"><span class="pre">wind</span></code>, <code class="docutils literal notranslate"><span class="pre">matom</span></code></p></li>
</ul>
<p><strong>File:</strong> setup_reverb.c</p>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../other.html" class="btn btn-neutral float-right" title="Other" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="../reverb.html" class="btn btn-neutral float-left" title="Reverberation Mapping" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018, Knox Long, Christian Knigge, Stuart Sims, Nick Higginbottom, James Matthews, Sam Mangham, Edward Parkinson, Mandy Hewitt

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>